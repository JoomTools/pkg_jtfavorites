/**
 * @package      Joomla.Administrator
 * @subpackage   mod_jtfavorites
 *
 * @author       Guido De Gobbis <support@joomtools.de>
 * @copyright    2020 JoomTools.de - All rights reserved.
 * @license      GNU General Public License version 3 or later
 */
var JtFavorites=window.JtFavorites||{};function modJtFavReady(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}!function(e,t){"use strict";e.sendData=function(e){var t=new XMLHttpRequest,n=new FormData(e);t.addEventListener("load",function(e){location.reload()}),t.addEventListener("error",function(e){console.error("mod_jtfavorites: Oops! Something went wrong on sending form data.")}),t.open("POST",e.getAttribute("action")),t.send(n)},e.submitform=function(n,a,i){a.addEventListener("submit",function(t){t.preventDefault(),e.sendData(a)}),n&&(a.task.value=n),a.noValidate=!i,i?a.hasAttribute("novalidate")&&a.removeAttribute("novalidate"):a.setAttribute("novalidate","");var r=t.createElement("input");r.style.display="none",r.type="submit",a.appendChild(r).click(),a.removeChild(r)},e.findAncestorForm=function(e){var n=e.match(/^[a-zA-Z]+/);return null!=n&&t.querySelector("#"+n.toString())},e.listItemTask=function(t,n){var a,i=e.findAncestorForm(t),r=0,o=i[t];if(!o)return!1;for(;a=i["cb"+r];)a.checked=!1,r++;o.checked=!0,i.boxchecked.value=1;var s=n.split(".",1);return i.setAttribute("action",i.getAttribute("data-"+s+"-action")),e.submitform(n,i),!1},e.changeListItemTask=function(){var e=t.querySelectorAll(".mod_jtfavorites *[onclick*=listItemTask]");Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("onclick");e.setAttribute("onclick",t.replace("listItemTask","JtFavorites.listItemTask"))})},e.customActionsAddGetParams=function(){var e=t.querySelectorAll(".mod_jtfavorites .customs .ext-link"),n=window.Joomla.getOptions("csrf.token",""),a=t.createElement("style"),i=t.createElement("span"),r=t.createElement("span");a.setAttribute("type","text/css"),a.appendChild(t.createTextNode(".spinner {\n  display: inline-block;\n  height: 14px;\n  vertical-align: middle;\n  line-height: 18px;\n}\n.spinner > span {\n  background-color: #333;\n  margin-left: 2px;\n  height: 100%;\n  width: 3px;\n  display: inline-block;\n  -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;\n  animation: sk-stretchdelay 1.2s infinite ease-in-out;\n}\n.spinner .rect2 {\n  -webkit-animation-delay: -1.1s;\n  animation-delay: -1.1s;\n}\n.spinner .rect3 {\n  -webkit-animation-delay: -1.0s;\n  animation-delay: -1.0s;\n}\n@-webkit-keyframes sk-stretchdelay {\n  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \n  20% { -webkit-transform: scaleY(1.0) }\n}\n@keyframes sk-stretchdelay {\n  0%, 40%, 100% { \n    transform: scaleY(0.4);\n    -webkit-transform: scaleY(0.4);\n  }  20% { \n    transform: scaleY(1.0);\n    -webkit-transform: scaleY(1.0);\n  }\n}")),t.head.appendChild(a),i.setAttribute("class","spinner"),i.setAttribute("aria-hidden","true"),i.innerHTML='<span class="rect1"></span><span class="rect2"></span><span class="rect3"></span>',r.setAttribute("class","icon-save"),r.setAttribute("aria-hidden","true"),Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("href");e.addEventListener("click",function(a){a.preventDefault(),e.parentNode.appendChild(i),window.Joomla.request({url:t,headers:{"X-CSRF-Token":n},onError:function(e){console.error("ERROR: ",e)},onSuccess:function(){e.parentNode.removeChild(i),e.parentNode.appendChild(r),setTimeout(function(){e.parentNode.removeChild(r)},4e3)}})})})}}(JtFavorites,document),modJtFavReady(JtFavorites.changeListItemTask),modJtFavReady(JtFavorites.customActionsAddGetParams);